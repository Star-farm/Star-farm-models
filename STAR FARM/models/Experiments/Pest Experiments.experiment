/**
* Name: BasicExperiments
* This wizard creates a new experiment file. 
* Author: patricktaillandier
* Tags:  
*/ 

model STARFARM  

import "../Entities/Parasite.gaml" 
import "Generic Experiment.experiment"

global {
	int init_pest_cluster_number <- 4;
	int init_predator_number <- 2;
}

experiment "Pest experiment" parent: generic_exp virtual: false{
	category "Map" expanded: true color: rgb(143, 156, 180);
	parameter "Display" var: map_display among: ["Current practice","Pest density"] category: "Map";


	parameter "Chart" var: current_chart category: "Year evolution" among: chart_list init: "Pest";
	parameter "Indicators family" var: current_indicator_family among: indicator_families_list+["Pest_Cluster", "Predator", "BrownPlanthopper_Cluster"] category: "Daily indicators";

	
	
	output{
		display pest_map parent: base_map virtual: false{
			species species(Pest_Cluster);
			species BrownPlanthopper_Cluster;
			species Predator;
		}
		
		display pc name: "Year evolution" type: 2d toolbar: false antialias: true parent: base_practices_information{}
		
		
		display Indicators type: 2d toolbar: false antialias: true parent: base_daily_indicators{
			chart "Pest" type: series x_range: time_range(time_range_type) y2_range: [0,1] y2_tick_unit: 2 y_label: "Â¨Pest density" visible: (current_indicator_family = "Pest") {
				data "Pest population" value: length(BrownPlanthopper_Cluster)  color: #red marker: false;
				// season overlay
				datalist current_practices() collect(each.short_name+" seasons") legend: current_practices() collect(each.short_name) value: current_practices() collect(each.activity) color: current_practices() collect rgb(each.color,season_opacity) style: area line_visible: false marker: false use_second_y_axis: true;
			}
		}
		
		display Weather type: 2d toolbar: false antialias: true parent: base_weather{}
		
	}
}

